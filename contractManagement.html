<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContractFlow - Vertragsmanagement System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="home-button">Zur Startseite</a>
            <h1>ContractFlow</h1>
            <p>Professionelles Vertragsmanagement System</p>
            <div id="documentInfo" style="font-size: 0.8em; color: #666; margin-top: 10px;"></div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('vertragsgrundlagen', event)">Vertragsgrundlagen</button>
            <button class="nav-tab" onclick="showTab('partner-kontakte', event)">Vertragspartner & Kontakte</button>
            <button class="nav-tab" onclick="showTab('dokumente', event)">Vertragsdokumente</button>
            <button class="nav-tab" onclick="showTab('compliance-monitoring', event)">Compliance & Monitoring</button>
            <button class="nav-tab" onclick="showTab('leistungs-zahlung', event)">Leistungs- & Zahlungsmonitoring</button>
            <button class="nav-tab" onclick="showTab('historie-notizen', event)">Historie & Notizen</button>
            <button class="nav-tab" onclick="showTab('risikomanagement', event)">Risikomanagement</button>
        </div>

        <div class="content">
            <div id="vertragsgrundlagen" class="tab-content active">
                <div class="section">
                    <h2>Vertragsgrundlagen</h2>
                    <h3>Vertragstyp auswählen</h3>
                    <div class="contract-type-selector">
                        <div class="contract-type-card" onclick="selectContractType(this, 'service')">
                            <h4>Dienstleistungsvertrag</h4>
                            <p>Beratung, IT-Services, Wartung</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'purchase')">
                            <h4>Kaufvertrag</h4>
                            <p>Waren, Produkte, Materialien</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'rental')">
                            <h4>Mietvertrag</h4>
                            <p>Räumlichkeiten, Fahrzeuge, Equipment</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'license')">
                            <h4>Lizenzvertrag</h4>
                            <p>Software, Patente, Nutzungsrechte</p>
                        </div>
                    </div>
                    <h3>Vertragsidentifikation</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vertragsnummer">Vertragsnummer:</label>
                            <input type="text" id="vertragsnummer" name="vertragsnummer" placeholder="Eindeutige Vertragskennung">
                        </div>
                        <div class="form-group">
                            <label for="vertragsbezeichnung">Vertragsbezeichnung:</label>
                            <input type="text" id="vertragsbezeichnung" name="vertragsbezeichnung" placeholder="Kurze Beschreibung des Vertrags">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vertragspartner">Vertragspartner:</label>
                            <input type="text" id="vertragspartner" name="vertragspartner" placeholder="Name der Vertragspartei">
                        </div>
                        <div class="form-group">
                            <label for="vertragsstatus">Vertragsstatus:</label>
                            <select id="vertragsstatus" name="vertragsstatus">
                                <option value="">Status auswählen</option>
                                <option value="entwurf">Entwurf</option>
                                <option value="verhandlung">In Verhandlung</option>
                                <option value="genehmigung">Zur Genehmigung</option>
                                <option value="aktiv">Aktiv</option>
                                <option value="pausiert">Pausiert</option>
                                <option value="gekuendigt">Gekündigt</option>
                                <option value="abgelaufen">Abgelaufen</option>
                            </select>
                        </div>
                    </div>
                    <h3>Vertragslaufzeit & Termine</h3>
                    <div class="form-row-triple">
                        <div class="form-group">
                            <label for="vertragsbeginn">Vertragsbeginn:</label>
                            <input type="date" id="vertragsbeginn" name="vertragsbeginn">
                        </div>
                        <div class="form-group">
                            <label for="vertragsende">Vertragsende:</label>
                            <input type="date" id="vertragsende" name="vertragsende">
                        </div>
                        <div class="form-group">
                            <label for="kuendigungsfrist">Kündigungsfrist (Tage):</label>
                            <input type="number" id="kuendigungsfrist" name="kuendigungsfrist" placeholder="30">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="automatische-verlaengerung">Automatische Verlängerung:</label>
                            <select id="automatische-verlaengerung" name="automatische-verlaengerung">
                                <option value="nein">Nein</option>
                                <option value="monatlich">Monatlich</option>
                                <option value="quartalsweise">Quartalsweise</option>
                                <option value="jaehrlich">Jährlich</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="naechste-pruefung">Nächste Prüfung:</label>
                            <input type="date" id="naechste-pruefung" name="naechste-pruefung">
                        </div>
                    </div>
                    <h3>Vertragsinhalt & Leistungen</h3>
                    <div class="form-group">
                        <label for="vertragsgegenstand">Vertragsgegenstand:</label>
                        <textarea id="vertragsgegenstand" name="vertragsgegenstand" placeholder="Detaillierte Beschreibung der vereinbarten Leistungen, Produkte oder Dienstleistungen..." class="textarea-large"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="lieferbedingungen">Lieferbedingungen / SLAs:</label>
                        <textarea id="lieferbedingungen" name="lieferbedingungen" placeholder="Lieferzeiten, Service Level Agreements, Qualitätsstandards..."></textarea>
                    </div>
                    <h3>Finanzielle Vereinbarungen</h3>
                    <div class="form-row-triple">
                        <div class="form-group">
                            <label for="gesamtwert">Gesamtwert des Vertrags:</label>
                            <input type="text" id="gesamtwert" name="gesamtwert" placeholder="z.B. 10.000 EUR">
                        </div>
                        <div class="form-group">
                            <label for="zahlungsbedingungen">Zahlungsbedingungen:</label>
                            <input type="text" id="zahlungsbedingungen" name="zahlungsbedingungen" placeholder="z.B. Netto 30 Tage">
                        </div>
                        <div class="form-group">
                            <label for="waehrung">Währung:</label>
                            <select id="waehrung" name="waehrung">
                                <option>EUR</option>
                                <option>USD</option>
                                <option>GBP</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="zahlungshaeufigkeit">Zahlungshäufigkeit:</label>
                        <select id="zahlungshaeufigkeit" name="zahlungshaeufigkeit">
                            <option value="einmalig">Einmalig</option>
                            <option value="monatlich">Monatlich</option>
                            <option value="quartalsweise">Quartalsweise</option>
                            <option value="jaehrlich">Jährlich</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="partner-kontakte" class="tab-content">
                <div class="section">
                    <h2>Vertragspartner & Kontakte</h2>
                    <h3>Hauptansprechpartner</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ansprechpartner-name">Name:</label>
                            <input type="text" id="ansprechpartner-name" name="ansprechpartner-name" placeholder="Name des Ansprechpartners">
                        </div>
                        <div class="form-group">
                            <label for="ansprechpartner-email">E-Mail:</label>
                            <input type="email" id="ansprechpartner-email" name="ansprechpartner-email" placeholder="E-Mail des Ansprechpartners">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ansprechpartner-telefon">Telefon:</label>
                            <input type="tel" id="ansprechpartner-telefon" name="ansprechpartner-telefon" placeholder="Telefonnummer">
                        </div>
                        <div class="form-group">
                            <label for="ansprechpartner-position">Position:</label>
                            <input type="text" id="ansprechpartner-position" name="ansprechpartner-position" placeholder="Position im Unternehmen">
                        </div>
                    </div>
                    <h3>Weitere Kontakte</h3>
                    <div id="additionalContacts">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addContact()">+ Weiteren Kontakt hinzufügen</button>
                </div>
            </div>

            <div id="dokumente" class="tab-content">
                <div class="section">
                    <h2>Vertragsdokumente</h2>
                    <div class="form-group document-upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Dokumente hierher ziehen oder <label for="file-upload" style="display: inline; cursor: pointer; color: #4f46e5; text-decoration: underline;">hochladen</label></p>
                        <input type="file" id="file-upload" multiple style="display: none;">
                    </div>
                    <div id="uploadedDocuments">
                        </div>
                </div>
            </div>

            <div id="compliance-monitoring" class="tab-content">
                <div class="section">
                    <h2>Compliance & Monitoring</h2>
                    <h3>Wichtige Verpflichtungen & Fristen</h3>
                    <div id="obligationsTableContainer">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Beschreibung der Verpflichtung</th>
                                    <th>Frist</th>
                                    <th>Verantwortlicher</th>
                                    <th>Status</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="obligationsTableBody">
                            </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addObligationRow()">+ Weitere Verpflichtung hinzufügen</button>
                    </div>
                    <h3>Audit-Historie</h3>
                    <div id="auditHistory">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addAuditEntry()">+ Audit-Eintrag hinzufügen</button>
                </div>
            </div>

            <div id="leistungs-zahlung" class="tab-content">
                <div class="section">
                    <h2>Leistungs- & Zahlungsmonitoring</h2>
                    <h3>Aktueller Leistungsstand</h3>
                    <div class="form-group">
                        <label for="leistungsstand">Aktueller Leistungsstand:</label>
                        <input type="range" id="leistungsstand" name="leistungsstand" min="0" max="100" value="50" oninput="updateLeistungsstand(this.value)">
                        <p id="leistungsstand-text">50% erfüllt</p>
                    </div>
                    <h3>Zahlungshistorie</h3>
                    <div id="paymentHistory">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rechnungsnummer</th>
                                    <th>Datum</th>
                                    <th>Betrag</th>
                                    <th>Status</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="paymentTableBody">
                            </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addPaymentEntry()">+ Zahlungseintrag hinzufügen</button>
                    </div>
                </div>
            </div>

            <div id="historie-notizen" class="tab-content">
                <div class="section">
                    <h2>Historie & Notizen</h2>
                    <h3>Versionshistorie</h3>
                    <div id="versionHistory">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addVersionEntry()">+ Version hinzufügen</button>
                    <h3>Interne Notizen</h3>
                    <div class="form-group">
                        <textarea id="internalNotes" placeholder="Fügen Sie hier interne Notizen oder Kommentare hinzu."></textarea>
                    </div>
                </div>
            </div>

            <div id="risikomanagement" class="tab-content">
                <div class="section">
                    <h2>Risikomanagement</h2>
                    <h3>Vertragliche Risiken</h3>
                    <div id="contractRisks">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Risikobeschreibung</th>
                                    <th>Kategorie</th>
                                    <th>Eintrittswahrscheinlichkeit</th>
                                    <th>Auswirkung</th>
                                    <th>Maßnahme</th>
                                    <th>Verantwortlicher</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="riskTableBody">
                            </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addRiskRow()">+ Weiteres Risiko hinzufügen</button>
                    </div>
                    <h3>Notfall- und Business Continuity Planung</h3>
                    <div class="form-group">
                        <label for="notfallplan">Notfallplan / Business Continuity:</label>
                        <textarea id="notfallplan" placeholder="Details zu Notfallmaßnahmen und Business Continuity Plänen im Kontext des Vertrags"></textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const documentInfoDiv = document.getElementById('documentInfo');
            if (documentInfoDiv) {
                documentInfoDiv.innerHTML = `Version 1.0 (Stand: ${new Date().toLocaleDateString('de-DE')})`;
            }
        });

        function showTab(tabId, event) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');

            const navTabs = document.querySelectorAll('.nav-tab');
            navTabs.forEach(tab => tab.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function selectContractType(card, type) {
            const allCards = document.querySelectorAll('.contract-type-card');
            allCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            document.getElementById('selected-contract-type').value = type;
        }

        function addContact() {
            const container = document.getElementById('additionalContacts');
            const newContactDiv = document.createElement('div');
            newContactDiv.classList.add('contact-item');
            newContactDiv.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Name:</label>
                        <input type="text" placeholder="Name des weiteren Ansprechpartners">
                    </div>
                    <div class="form-group">
                        <label>E-Mail:</label>
                        <input type="email" placeholder="E-Mail des weiteren Ansprechpartners">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Telefon:</label>
                        <input type="tel" placeholder="Telefonnummer">
                    </div>
                    <div class="form-group">
                        <label>Position:</label>
                        <input type="text" placeholder="Position im Unternehmen">
                    </div>
                </div>
                <button type="button" class="delete-button" onclick="deleteContact(this)">X</button>
                <hr>
            `;
            container.appendChild(newContactDiv);
        }

        function deleteContact(button) {
            button.closest('.contact-item').remove();
        }

        function addObligationRow() {
            const tableBody = document.getElementById('obligationsTableBody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><textarea placeholder="Beschreibung"></textarea></td>
                <td><input type="date"></td>
                <td><input type="text" placeholder="Verantwortlicher"></td>
                <td>
                    <select>
                        <option>Offen</option>
                        <option>Erfüllt</option>
                        <option>Überfällig</option>
                    </select>
                </td>
                <td><button type="button" class="delete-button" onclick="deleteRow(this)">X</button></td>
            `;
            tableBody.appendChild(newRow);
        }

        function addAuditEntry() {
            const container = document.getElementById('auditHistory');
            const newEntryDiv = document.createElement('div');
            newEntryDiv.classList.add('audit-item');
            newEntryDiv.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Datum des Audits:</label>
                        <input type="date">
                    </div>
                    <div class="form-group">
                        <label>Auditor:</label>
                        <input type="text" placeholder="Name des Auditors">
                    </div>
                </div>
                <div class="form-group">
                    <label>Ergebnisse & Empfehlungen:</label>
                    <textarea placeholder="Zusammenfassung der Audit-Ergebnisse und empfohlene Maßnahmen"></textarea>
                </div>
                <button type="button" class="delete-button" onclick="deleteAuditEntry(this)">X</button>
                <hr>
            `;
            container.appendChild(newEntryDiv);
        }

        function deleteAuditEntry(button) {
            button.closest('.audit-item').remove();
        }

        function updateLeistungsstand(value) {
            document.getElementById('leistungsstand-text').innerText = `${value}% erfüllt`;
        }

        function addPaymentEntry() {
            const tableBody = document.getElementById('paymentTableBody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" placeholder="Rechnungsnummer"></td>
                <td><input type="date"></td>
                <td><input type="text" placeholder="Betrag"></td>
                <td>
                    <select>
                        <option>Bezahlt</option>
                        <option>Offen</option>
                        <option>Überfällig</option>
                    </select>
                </td>
                <td><button type="button" class="delete-button" onclick="deleteRow(this)">X</button></td>
            `;
            tableBody.appendChild(newRow);
        }

        function addVersionEntry() {
            const container = document.getElementById('versionHistory');
            const newEntryDiv = document.createElement('div');
            newEntryDiv.classList.add('version-item');
            newEntryDiv.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Version:</label>
                        <input type="text" placeholder="z.B. 1.0.1">
                    </div>
                    <div class="form-group">
                        <label>Datum:</label>
                        <input type="date">
                    </div>
                    <div class="form-group">
                        <label>Autor:</label>
                        <input type="text" placeholder="Name des Autors">
                    </div>
                </div>
                <div class="form-group">
                    <label>Änderungen:</label>
                    <textarea placeholder="Beschreibung der Änderungen in dieser Version"></textarea>
                </div>
                <button type="button" class="delete-button" onclick="deleteVersionEntry(this)">X</button>
                <hr>
            `;
            container.appendChild(newEntryDiv);
        }

        function deleteVersionEntry(button) {
            button.closest('.version-item').remove();
        }

        function addRiskRow() {
            const tableBody = document.getElementById('riskTableBody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><textarea placeholder="Risikobeschreibung"></textarea></td>
                <td>
                    <select>
                        <option>Finanziell</option>
                        <option>Rechtlich</option>
                        <option>Operativ</option>
                        <option>Technologisch</option>
                    </select>
                </td>
                <td>
                    <select>
                        <option>Niedrig</option>
                        <option>Mittel</option>
                        <option>Hoch</option>
                    </select>
                </td>
                <td>
                    <select>
                        <option>Gering</option>
                        <option>Mittel</option>
                        <option>Hoch</option>
                    </select>
                </td>
                <td><textarea placeholder="Maßnahme"></textarea></td>
                <td><input type="text" placeholder="Verantwortlicher"></td>
                <td><button type="button" class="delete-button" onclick="deleteRow(this)">X</button></td>
            `;
            tableBody.appendChild(newRow);
        }

        function generateDocumentation() {
            const vertragsnummer = document.getElementById('vertragsnummer').value || 'Nicht definiert';
            const vertragsbezeichnung = document.getElementById('vertragsbezeichnung').value || 'Unbenannt';
            const vertragspartner = document.getElementById('vertragspartner').value || 'Nicht definiert';
            const vertragsstatus = document.getElementById('vertragsstatus').value || 'Nicht definiert';
            const vertragsbeginn = document.getElementById('vertragsbeginn').value || 'N/A';
            const vertragsende = document.getElementById('vertragsende').value || 'N/A';
            const kuendigungsfrist = document.getElementById('kuendigungsfrist').value || 'N/A';
            const automatischeVerlaengerung = document.getElementById('automatische-verlaengerung').value || 'Nein';
            const naechstePruefung = document.getElementById('naechste-pruefung').value || 'N/A';
            const vertragsgegenstand = document.getElementById('vertragsgegenstand').value || 'Nicht definiert';
            const lieferbedingungen = document.getElementById('lieferbedingungen').value || 'Nicht definiert';
            const gesamtwert = document.getElementById('gesamtwert').value || 'N/A';
            const zahlungsbedingungen = document.getElementById('zahlungsbedingungen').value || 'N/A';
            const waehrung = document.getElementById('waehrung').value || 'N/A';
            const zahlungshaeufigkeit = document.getElementById('zahlungshaeufigkeit').value || 'N/A';

            const ansprechpartnerName = document.getElementById('ansprechpartner-name').value || 'N/A';
            const ansprechpartnerEmail = document.getElementById('ansprechpartner-email').value || 'N/A';
            const ansprechpartnerTelefon = document.getElementById('ansprechpartner-telefon').value || 'N/A';
            const ansprechpartnerPosition = document.getElementById('ansprechpartner-position').value || 'N/A';

            const uploadedDocuments = Array.from(document.querySelectorAll('#uploadedDocuments li')).map(li => li.textContent.replace('X', '').trim()).join(', ');

            const staticHtmlContent = `
                <!DOCTYPE html>
                <html lang="de">
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Vertragsdokumentation</title>
                    <style>
                        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background-color: #f4f4f4; color: #333; }
                        .document-container { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); max-width: 900px; margin: 20px auto; }
                        h1, h2, h3 { color: #333; }
                        .section { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
                        .section:last-child { border-bottom: none; }
                        .data-row-export { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px dotted #eee; }
                        .data-label-export { font-weight: bold; }
                        .data-value-export { text-align: right; }
                        .document-info { font-size: 0.8em; color: #666; margin-top: 10px; text-align: right;}
                    </style>
                </head>
                <body>
                    <div class="document-container">
                        <div class="header">
                            <h1>Vertragsdokumentation</h1>
                            <div class="document-info">Version 1.0 (Stand: ${new Date().toLocaleDateString('de-DE')})</div>
                        </div>

                        <div class="section">
                            <h2>Vertragsgrundlagen</h2>
                            <div class="data-row-export"><span class="data-label-export">Vertragsnummer:</span><span class="data-value-export">${vertragsnummer.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragsbezeichnung:</span><span class="data-value-export">${vertragsbezeichnung.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragspartner:</span><span class="data-value-export">${vertragspartner.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragsstatus:</span><span class="data-value-export">${vertragsstatus.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragsbeginn:</span><span class="data-value-export">${vertragsbeginn.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragsende:</span><span class="data-value-export">${vertragsende.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Kündigungsfrist (Tage):</span><span class="data-value-export">${kuendigungsfrist.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Automatische Verlängerung:</span><span class="data-value-export">${automatischeVerlaengerung.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Nächste Prüfung:</span><span class="data-value-export">${naechstePruefung.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Vertragsgegenstand:</span><span class="data-value-export">${vertragsgegenstand.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Lieferbedingungen / SLAs:</span><span class="data-value-export">${lieferbedingungen.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Gesamtwert des Vertrags:</span><span class="data-value-export">${gesamtwert.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Zahlungsbedingungen:</span><span class="data-value-export">${zahlungsbedingungen.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Währung:</span><span class="data-value-export">${waehrung.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Zahlungshäufigkeit:</span><span class="data-value-export">${zahlungshaeufigkeit.replace(/\n/g, '<br>')}</span></div>
                        </div>

                        <div class="section">
                            <h2>Vertragspartner & Kontakte</h2>
                            <div class="data-row-export"><span class="data-label-export">Hauptansprechpartner Name:</span><span class="data-value-export">${ansprechpartnerName.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Hauptansprechpartner E-Mail:</span><span class="data-value-export">${ansprechpartnerEmail.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Hauptansprechpartner Telefon:</span><span class="data-value-export">${ansprechpartnerTelefon.replace(/\n/g, '<br>')}</span></div>
                            <div class="data-row-export"><span class="data-label-export">Hauptansprechpartner Position:</span><span class="data-value-export">${ansprechpartnerPosition.replace(/\n/g, '<br>')}</span></div>
                        </div>

                        <div class="section">
                            <h2>Vertragsdokumente</h2>
                            <div class="data-row-export"><span class="data-label-export">Hochgeladene Dokumente:</span><span class="data-value-export">${uploadedDocuments.replace(/\n/g, '<br>')}</span></div>
                        </div>
                    </div>
                </body>
                </html>
            `;

            const blob = new Blob([staticHtmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Vertragsdokumentation_${(document.getElementById('vertragsbezeichnung').value || 'Unbenannter Vertrag').replace(/[^a-z0-9]/gi, '_')}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert('Statische HTML-Dokumentation erstellt!');
        }


        function exportHandover() {
            alert('Übergabe-Paket Export würde hier implementiert werden - alle relevanten Dokumente und Daten für nahtlose Übergabe');
        }

        // Event listener for file upload
        document.getElementById('file-upload').addEventListener('change', function(event) {
            const files = event.target.files;
            const uploadedDocumentsList = document.getElementById('uploadedDocuments');
            for (const file of files) {
                const listItem = document.createElement('li');
                listItem.textContent = file.name;
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'X';
                deleteButton.classList.add('delete-button'); // Use existing delete button style
                deleteButton.onclick = function() {
                    listItem.remove();
                };
                listItem.appendChild(deleteButton);
                uploadedDocumentsList.appendChild(listItem);
            }
        });

    </script>
</body>
</html>