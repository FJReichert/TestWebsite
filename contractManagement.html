<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContractFlow - Vertragsmanagement System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="index.html" class="home-button">Zur Startseite</a>
            <h1>ContractFlow</h1>
            <p>Professionelles Vertragsmanagement System</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('vertragsgrundlagen', event)">Vertragsgrundlagen</button>
            <button class="nav-tab" onclick="showTab('partner-kontakte', event)">Vertragspartner & Kontakte</button>
            <button class="nav-tab" onclick="showTab('dokumente', event)">Vertragsdokumente</button>
            <button class="nav-tab" onclick="showTab('compliance-monitoring', event)">Compliance & Monitoring</button>
            <button class="nav-tab" onclick="showTab('leistungs-zahlung', event)">Leistungs- & Zahlungsmonitoring</button>
            <button class="nav-tab" onclick="showTab('historie-notizen', event)">Historie & Notizen</button>
            <button class="nav-tab" onclick="showTab('risikomanagement', event)">Risikomanagement</button>
        </div>

        <div class="content">
            <div id="vertragsgrundlagen" class="tab-content active">
                <div class="section">
                    <h2>Vertragsgrundlagen</h2>
                    <h3>Vertragstyp auswählen</h3>
                    <div class="contract-type-selector">
                        <div class="contract-type-card" onclick="selectContractType(this, 'service')">
                            <h4>Dienstleistungsvertrag</h4>
                            <p>Beratung, IT-Services, Wartung</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'purchase')">
                            <h4>Kaufvertrag</h4>
                            <p>Waren, Produkte, Materialien</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'rental')">
                            <h4>Mietvertrag</h4>
                            <p>Räumlichkeiten, Fahrzeuge, Equipment</p>
                        </div>
                        <div class="contract-type-card" onclick="selectContractType(this, 'license')">
                            <h4>Lizenzvertrag</h4>
                            <p>Software, Patente, Nutzungsrechte</p>
                        </div>
                    </div>
                    <h3>Vertragsidentifikation</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vertragsnummer">Vertragsnummer:</label>
                            <input type="text" id="vertragsnummer" name="vertragsnummer" placeholder="Eindeutige Vertragskennung">
                        </div>
                        <div class="form-group">
                            <label for="vertragsbezeichnung">Vertragsbezeichnung:</label>
                            <input type="text" id="vertragsbezeichnung" name="vertragsbezeichnung" placeholder="Kurze Beschreibung des Vertrags">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vertragspartner">Vertragspartner:</label>
                            <input type="text" id="vertragspartner" name="vertragspartner" placeholder="Name der Vertragspartei">
                        </div>
                        <div class="form-group">
                            <label for="vertragsstatus">Vertragsstatus:</label>
                            <select id="vertragsstatus" name="vertragsstatus">
                                <option value="">Status auswählen</option>
                                <option value="entwurf">Entwurf</option>
                                <option value="verhandlung">In Verhandlung</option>
                                <option value="genehmigung">Zur Genehmigung</option>
                                <option value="aktiv">Aktiv</option>
                                <option value="pausiert">Pausiert</option>
                                <option value="gekuendigt">Gekündigt</option>
                                <option value="abgelaufen">Abgelaufen</option>
                            </select>
                        </div>
                    </div>
                    <h3>Vertragslaufzeit & Termine</h3>
                    <div class="form-row-triple">
                        <div class="form-group">
                            <label for="vertragsbeginn">Vertragsbeginn:</label>
                            <input type="date" id="vertragsbeginn" name="vertragsbeginn">
                        </div>
                        <div class="form-group">
                            <label for="vertragsende">Vertragsende:</label>
                            <input type="date" id="vertragsende" name="vertragsende">
                        </div>
                        <div class="form-group">
                            <label for="kuendigungsfrist">Kündigungsfrist (Tage):</label>
                            <input type="number" id="kuendigungsfrist" name="kuendigungsfrist" placeholder="30">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="automatische-verlaengerung">Automatische Verlängerung:</label>
                            <select id="automatische-verlaengerung" name="automatische-verlaengerung">
                                <option value="nein">Nein</option>
                                <option value="monatlich">Monatlich</option>
                                <option value="quartalsweise">Quartalsweise</option>
                                <option value="jaehrlich">Jährlich</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="naechste-pruefung">Nächste Prüfung:</label>
                            <input type="date" id="naechste-pruefung" name="naechste-pruefung">
                        </div>
                    </div>
                    <h3>Vertragsinhalt & Leistungen</h3>
                    <div class="form-group">
                        <label for="vertragsgegenstand">Vertragsgegenstand:</label>
                        <textarea id="vertragsgegenstand" name="vertragsgegenstand" placeholder="Detaillierte Beschreibung der vereinbarten Leistungen, Produkte oder Dienstleistungen..." class="textarea-large"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="lieferbedingungen">Lieferbedingungen / SLAs:</label>
                        <textarea id="lieferbedingungen" name="lieferbedingungen" placeholder="Lieferzeiten, Service Level Agreements, Qualitätsstandards..."></textarea>
                    </div>
                    <h3>Finanzielle Vereinbarungen</h3>
                    <div class="form-row-triple">
                        <div class="form-group">
                            <label for="gesamtwert">Gesamtwert des Vertrags:</label>
                            <input type="text" id="gesamtwert" name="gesamtwert" placeholder="z.B. 10.000 EUR">
                        </div>
                        <div class="form-group">
                            <label for="zahlungsbedingungen">Zahlungsbedingungen:</label>
                            <input type="text" id="zahlungsbedingungen" name="zahlungsbedingungen" placeholder="z.B. Netto 30 Tage">
                        </div>
                        <div class="form-group">
                            <label for="waehrung">Währung:</label>
                            <select id="waehrung" name="waehrung">
                                <option>EUR</option>
                                <option>USD</option>
                                <option>GBP</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="zahlungshaeufigkeit">Zahlungshäufigkeit:</label>
                        <select id="zahlungshaeufigkeit" name="zahlungshaeufigkeit">
                            <option value="einmalig">Einmalig</option>
                            <option value="monatlich">Monatlich</option>
                            <option value="quartalsweise">Quartalsweise</option>
                            <option value="jaehrlich">Jährlich</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="partner-kontakte" class="tab-content">
                <div class="section">
                    <h2>Vertragspartner & Kontakte</h2>
                    <h3>Hauptansprechpartner</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ansprechpartner-name">Name:</label>
                            <input type="text" id="ansprechpartner-name" name="ansprechpartner-name" placeholder="Name des Ansprechpartners">
                        </div>
                        <div class="form-group">
                            <label for="ansprechpartner-email">E-Mail:</label>
                            <input type="email" id="ansprechpartner-email" name="ansprechpartner-email" placeholder="E-Mail des Ansprechpartners">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ansprechpartner-telefon">Telefon:</label>
                            <input type="tel" id="ansprechpartner-telefon" name="ansprechpartner-telefon" placeholder="Telefonnummer">
                        </div>
                        <div class="form-group">
                            <label for="ansprechpartner-position">Position:</label>
                            <input type="text" id="ansprechpartner-position" name="ansprechpartner-position" placeholder="Position im Unternehmen">
                        </div>
                    </div>
                    <h3>Weitere Kontakte</h3>
                    <div id="additionalContacts">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addContact()">+ Weiteren Kontakt hinzufügen</button>
                </div>
            </div>

            <div id="dokumente" class="tab-content">
                <div class="section">
                    <h2>Vertragsdokumente</h2>
                    <div class="form-group document-upload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Dokumente hierher ziehen oder <label for="file-upload" style="display: inline; cursor: pointer; color: #4f46e5; text-decoration: underline;">hochladen</label></p>
                        <input type="file" id="file-upload" multiple style="display: none;">
                    </div>
                    <div id="uploadedDocuments">
                        </div>
                </div>
            </div>

            <div id="compliance-monitoring" class="tab-content">
                <div class="section">
                    <h2>Compliance & Monitoring</h2>
                    <h3>Wichtige Verpflichtungen & Fristen</h3>
                    <div id="obligationsTableContainer">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Beschreibung der Verpflichtung</th>
                                    <th>Frist</th>
                                    <th>Verantwortlicher</th>
                                    <th>Status</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="obligationsTableBody">
                                </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addObligationRow()">+ Weitere Verpflichtung hinzufügen</button>
                    </div>
                    <h3>Audit-Historie</h3>
                    <div id="auditHistory">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addAuditEntry()">+ Audit-Eintrag hinzufügen</button>
                </div>
            </div>

            <div id="leistungs-zahlung" class="tab-content">
                <div class="section">
                    <h2>Leistungs- & Zahlungsmonitoring</h2>
                    <h3>Leistungsstand</h3>
                    <div class="form-group">
                        <label for="leistungsstand">Aktueller Leistungsstand:</label>
                        <input type="range" id="leistungsstand" name="leistungsstand" min="0" max="100" value="50" oninput="updateLeistungsstand(this.value)">
                        <p id="leistungsstand-text">50% erfüllt</p>
                    </div>
                    <h3>Zahlungshistorie</h3>
                    <div id="paymentHistory">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rechnungsnummer</th>
                                    <th>Datum</th>
                                    <th>Betrag</th>
                                    <th>Status</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="paymentTableBody">
                                </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addPaymentEntry()">+ Zahlungseintrag hinzufügen</button>
                    </div>
                </div>
            </div>

            <div id="historie-notizen" class="tab-content">
                <div class="section">
                    <h2>Historie & Notizen</h2>
                    <h3>Versionshistorie</h3>
                    <div id="versionHistory">
                        </div>
                    <button type="button" class="btn btn-secondary" onclick="addVersionEntry()">+ Version hinzufügen</button>

                    <h3>Interne Notizen</h3>
                    <div class="form-group">
                        <textarea id="internalNotes" placeholder="Fügen Sie hier interne Notizen oder Kommentare hinzu."></textarea>
                    </div>
                </div>
            </div>

            <div id="risikomanagement" class="tab-content">
                <div class="section">
                    <h2>Risikomanagement</h2>
                    <h3>Vertragliche Risiken</h3>
                    <div id="contractRisks">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Risikobeschreibung</th>
                                    <th>Kategorie</th>
                                    <th>Eintrittswahrscheinlichkeit</th>
                                    <th>Auswirkung</th>
                                    <th>Maßnahme</th>
                                    <th>Verantwortlicher</th>
                                    <th>Status</th>
                                    <th>Aktion</th>
                                </tr>
                            </thead>
                            <tbody id="riskTableBody">
                                </tbody>
                        </table>
                        <button type="button" class="btn btn-secondary" onclick="addRiskEntry()">+ Risiko hinzufügen</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Function to show/hide tabs - adjusted to use 'nav-tab' and 'tab-content'
        function showTab(tabName, event) {
            let i, tabcontent, navlinks;

            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
                tabcontent[i].classList.remove("active");
            }

            navlinks = document.getElementsByClassName("nav-tab");
            for (i = 0; i < navlinks.length; i++) {
                navlinks[i].classList.remove("active");
            }

            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add("active");
            if (event) {
                event.currentTarget.classList.add("active");
            }
        }

        // Set default open tab on page load
        document.addEventListener("DOMContentLoaded", function() {
            // Get the first tab button and trigger its click event
            const firstTabButton = document.querySelector(".nav-tab");
            if (firstTabButton) {
                firstTabButton.click();
            }
        });

        // Specific functions for Contract Management System
        function selectContractType(cardElement, type) {
            const cards = document.querySelectorAll('.contract-type-card');
            cards.forEach(card => card.classList.remove('selected'));
            cardElement.classList.add('selected');
            console.log('Selected contract type:', type);
            // Here you might dynamically load forms or content based on type
        }

        function addContact() {
            const container = document.getElementById('additionalContacts');
            const newContactHtml = `
                <div class="stakeholder-item"> <button type="button" class="delete-button" onclick="deleteItem(this)">X</button>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Name:</label>
                            <input type="text" placeholder="Name des Kontakts">
                        </div>
                        <div class="form-group">
                            <label>E-Mail:</label>
                            <input type="email" placeholder="E-Mail des Kontakts">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Telefon:</label>
                            <input type="tel" placeholder="Telefonnummer">
                        </div>
                        <div class="form-group">
                            <label>Position:</label>
                            <input type="text" placeholder="Position">
                        </div>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', newContactHtml);
        }

        function deleteItem(buttonElement) {
            buttonElement.closest('.stakeholder-item, .obligation-row, .audit-item, .payment-row, .version-item, .risk-row').remove();
        }


        function addObligationRow() {
            const tbody = document.getElementById('obligationsTableBody');
            const newRow = `
                <tr class="obligation-row">
                    <td><input type="text" placeholder="Verpflichtungsbeschreibung"></td>
                    <td><input type="date"></td>
                    <td><input type="text" placeholder="Verantwortlicher"></td>
                    <td>
                        <select>
                            <option>Offen</option>
                            <option>In Bearbeitung</option>
                            <option>Erfüllt</option>
                            <option>Überfällig</option>
                        </select>
                    </td>
                    <td><button type="button" class="delete-button" onclick="deleteItem(this)">X</button></td>
                </tr>
            `;
            tbody.insertAdjacentHTML('beforeend', newRow);
        }

        function addAuditEntry() {
            const container = document.getElementById('auditHistory');
            const newAuditHtml = `
                <div class="stakeholder-item audit-item"> <button type="button" class="delete-button" onclick="deleteItem(this)">X</button>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Datum des Audits:</label>
                            <input type="date">
                        </div>
                        <div class="form-group">
                            <label>Auditor:</label>
                            <input type="text" placeholder="Name des Auditors">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ergebnisse & Empfehlungen:</label>
                        <textarea placeholder="Zusammenfassung der Audit-Ergebnisse und Empfehlungen"></textarea>
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', newAuditHtml);
        }

        function updateLeistungsstand(value) {
            document.getElementById('leistungsstand-text').textContent = value + '% erfüllt';
        }

        function addPaymentEntry() {
            const tbody = document.getElementById('paymentTableBody');
            const newRow = `
                <tr class="payment-row">
                    <td><input type="text" placeholder="Rechnungsnummer"></td>
                    <td><input type="date"></td>
                    <td><input type="text" placeholder="Betrag"></td>
                    <td>
                        <select>
                            <option>Offen</option>
                            <option>Bezahlt</option>
                            <option>Überfällig</option>
                        </select>
                    </td>
                    <td><button type="button" class="delete-button" onclick="deleteItem(this)">X</button></td>
                </tr>
            `;
            tbody.insertAdjacentHTML('beforeend', newRow);
        }

        function addVersionEntry() {
            const container = document.getElementById('versionHistory');
            const newVersionHtml = `
                <div class="stakeholder-item version-item">
                    <button type="button" class="delete-button" onclick="deleteItem(this)">X</button>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Version:</label>
                            <input type="text" placeholder="z.B. 1.0, 1.1">
                        </div>
                        <div class="form-group">
                            <label>Datum:</label>
                            <input type="date">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Änderungen:</label>
                        <textarea placeholder="Beschreibung der Änderungen in dieser Version"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Autor:</label>
                        <input type="text" placeholder="Name des Autors">
                    </div>
                </div>
            `;
            container.insertAdjacentHTML('beforeend', newVersionHtml);
        }

        function addRiskEntry() {
            const tbody = document.getElementById('riskTableBody');
            const newRow = `
                <tr class="risk-row">
                    <td><input type="text" placeholder="Risikobeschreibung"></td>
                    <td>
                        <select>
                            <option>Rechtlich</option>
                            <option>Finanziell</option>
                            <option>Operationell</option>
                            <option>Reputation</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option>Niedrig</option>
                            <option>Mittel</option>
                            <option>Hoch</option>
                        </select>
                    </td>
                    <td>
                        <select>
                            <option>Gering</option>
                            <option>Mittel</option>
                            <option>Hoch</option>
                        </select>
                    </td>
                    <td><input type="text" placeholder="Maßnahme zur Minderung"></td>
                    <td><input type="text" placeholder="Verantwortlicher"></td>
                    <td>
                        <select>
                            <option>Offen</option>
                            <option>In Bearbeitung</option>
                            <option>Geschlossen</option>
                        </select>
                    </td>
                    <td><button type="button" class="delete-button" onclick="deleteItem(this)">X</button></td>
                </tr>
            `;
            tbody.insertAdjacentHTML('beforeend', newRow);
        }

    </script>
</body>
</html>